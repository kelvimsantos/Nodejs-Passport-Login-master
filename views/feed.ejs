<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Feed de Publicações</title>
    <link rel="stylesheet" type="text/css"  href="./stylesFeed.css">
    <script src="script.js"></script>
</head>
<body>
    <div class="container">
        <!-- Perfil do Usuário -->
        <div class="profile">
            <!-- Informações do Perfil -->
            <div class="profile-info">
             
                 <!-- Adicionando foto de perfil -->
       
            <img id="preview-image" class="preview-image" src="" alt="Imagem do Perfil">
        
                <h2><%= user.name %></h2>
                <h3>informações perfil</h3>
                <!-- Outras informações do perfil, como status, número de amigos, etc. -->
                <div>   <img class="left-image" src="esq.png" alt="Foto de dono"></div>
            </div>

            <div>
                <!-- Formulário de busca de amigos -->
                <form id="search-form">
                    <input type="text" id="search-input" placeholder="Buscar por nome de usuário">
                    <button type="submit" id="submitInvite">Buscar</button>
                </form>
                
                <!-- Resultados da busca -->
                <div id="search-results"></div>
            </div>
        </div>
        

        <!-- Linha Vertical -->
        <div class="vertical-line"></div>
        <!-- Feed de Publicações -->
        <div class="feed">
            <h1>Feed de Publicações</h1>
            
            <!-- Lista de Publicações -->
            <div class="post">
                <p>Conteúdo da Publicação...</p>
                
                <form id="declaration-form" action="/adicionar-publicacao" method="post">
                    <!-- <label for="declaration">Publicar Declaração:</label>-->
                    <textarea class="declaration" id="declaration" name="conteudo"></textarea>
                    <br/>
                    <button type="submit">Publicar</button>
                </form>

                <div id="feed-container"></div>

                <div class="publicaçoe-feed">
                    <h2>Publicações</h2>
                    <ul>
                      <% publicacoes.forEach(publicacao => { %>
                        <li>
                          <strong><%= publicacao.autor %></strong>: <%= publicacao.conteudo %>
                          <br><small><%= publicacao.data %></small>
                        </li>
                      <% }) %>
                    </ul>

                </div>
                <!-- Botões de Curtir, Comentar, Compartilhar, etc. -->

            </div>
            <!-- Adicione mais publicações conforme necessário -->
        </div>
        <!-- Amigos e Comunidades -->
        <div class="sidebar">
            <div class="friends-communities">
                <h3>Amigos</h3>

            <div class="friend-bloco">
                <div class="friend-container">
                    <% amigos.forEach(amigo => { %>
                        <% if (amigo) { %>
                          <div class="friend" data-id="<%= amigo.id %>" data-name="<%= amigo.name %>" data-email="<%= amigo.email %>" data-image="<%= amigo.profileImagePathNoView %>">
                            <a href="/perfil/<%= amigo.id %>">
                              <img src="<%= amigo.profileImagePathNoView %>" alt="Foto de perfil" width="30" height="30">
                              <p><strong><%= amigo.name %></strong></p>
                              <!--<p><strong><%= amigo.name %></strong> - <%= amigo.email %></p>-->
                            </a>
                          </div>
                        <% } else { %>
                          <div class="friend">
                            <p>Amigo não encontrado</p>
                          </div>
                        <% } %>
                      <% }) %>
                </div>
                <a href="/todos-amigos">Ver todos os amigos</a>
            </div>
                    <!-- Adicione mais amigos conforme necessário -->

            <div class="views/stylesFeed.css">
               <!-- Comunidades -->
                <h3>Comunidades</h3>
                <div class="community-container">
                    <h2>Comunidades</h2>
                    
                    <ul class="community-grid">
                      <% for (let i = 0; i < 9; i++) { %>
                        <li class="community">
                          <% if (comunidades[i]) { %>
                            <a href="/comunidade/<%= comunidades[i].id %>">
                              <img src="<%= comunidades[i].imagemPerfil.replace(/^\.\/views\//, '') %>" alt="<%= comunidades[i].nome %>">
                              <p><%= comunidades[i].nome %></p>
                            </a>
                          <% } else { %>
                            <img src="./QWsX.gif" alt="Comunidade Vazia">
                            <p>Comunidade Vazia</p>
                          <% } %>
                        </li>
                      <% } %>
                    </ul>
                
                    <!-- Link para criar nova comunidade -->
                    <a href="/criar-comunidade">Criar Nova Comunidade</a>
                </div>
            </div>
            <div class="right-div"> <img class="right-image"  src="eminemGOD.gif" alt="Foto de dono"></div>
        </div>

        <h1>Procurar e Aderir à Comunidade</h1>
  
        <form action="/procurar-comunidade" method="GET">
          <label for="nome">Nome da Comunidade:</label>
          <input type="text" id="nome" name="nome" required>
          
          <!-- ID do usuário como campo oculto -->
          <input type="hidden" name="usuarioId" value="<%= user.id %>">
          
          <button type="submit">Procurar e Aderir</button>
          
        </form>
      <!-- Aqui pode ser onde os resultados da busca vão aparecer -->
   <!-- Resultados da busca de comunidades -->


    </div>
</body>
</html>
